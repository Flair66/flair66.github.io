<!doctype html>
<html lang="de">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

		<title>Speisekarte - Flair66</title>

		<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
	</head>
	<body>
		<main class="container-md">
			<div class="mt-5 mb-4 text-center">
				<img height="60px" src="./flair.png">
			</div>
			<div class="alert alert-success text-center" role="alert">
				<strong>Happy Hour</strong><br>
				Sonntag bis Donnerstag von 17-20 Uhr gelten die grünen Happy Hour Preise.
			</div>
			<div class="card mb-4">
				<div class="card-body p-3">
					<div id="content" class="row px-3"></div>
				</div>
			</div>
		</main>

		<div class="modal fade" id="welcomemodal" data-backdrop="static" data-keyboard="true" data-focus="true" data-show="true" tabindex="-1" role="dialog" aria-labelledby="welcomelabel" aria-hidden="true">
			<div class="modal-dialog modal-lg modal-dialog-centered modal-dialog-scrollable">
				<div class="modal-content">
					<div class="modal-header">
						<h3 class="modal-title" id="welcomelabel">Herzlich Willkommen!</h3>
					</div>
					<div class="modal-body">
						Liebe Gäste, Willkommen auf der digitalen Getränke- und Speisekarte des Flair66.
						Auf Grund der aktuellen Hygienemaßnahmen haben wir nun eine digitale Karte damit Sie weiterhin sorgenfrei nach ihrem neuen Lieblings-Cocktail oder einen leckeren Snack stöbern können.
						<hr>
						<h4>Unsere Öffnungszeiten:</h4>
						<dl class="row mx-0">
							<dt class="col-5 text-right">
								<strong>Montag:</strong>
							</dt>
							<dd class="col-7">
								17:00 Uhr - 00:00 Uhr
							</dd>
							<dt class="col-5 text-right">
								<strong>Dienstag:</strong>
							</dt>
							<dd class="col-7">
								17:00 Uhr - 00:00 Uhr
							</dd>
							<dt class="col-5 text-right">
								<strong>Mittwoch:</strong>
							</dt>
							<dd class="col-7">
								17:00 Uhr - 00:00 Uhr
							</dd>
							<dt class="col-5 text-right">
								<strong>Donnerstag:</strong>
							</dt>
							<dd class="col-7">
								17:00 Uhr - 00:00 Uhr
							</dd>
							<dt class="col-5 text-right">
								<strong>Freitag:</strong>
							</dt>
							<dd class="col-7">
								17:00 Uhr - 02:00 Uhr
							</dd>
							<dt class="col-5 text-right">
								<strong>Samstag:</strong>
							</dt>
							<dd class="col-7">
								17:00 Uhr - 02:00 Uhr
							</dd>
							<dt class="col-5 text-right">
								<strong>Sonntag:</strong>
							</dt>
							<dd class="col-7">
								17:00 Uhr - 00:00 Uhr
							</dd>
						</dl>
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-success" data-dismiss="modal">Zur Karte</button>
					</div>
				</div>
			</div>
		</div>

		<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
		<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
		<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js" integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI" crossorigin="anonymous"></script>
		<script>
			function create_block(block) {
				document.getElementById('content').insertAdjacentHTML('beforeend', `
					<div class="col-sm-6 col-md-4 col-lg-3 p-1">
						<button class="btn btn-outline-dark btn-block" onclick="document.getElementById('block-${block.id}').scrollIntoView(true)">${block.name}</button>
					</div>
				`);
				document.getElementsByTagName('main')[0].insertAdjacentHTML('beforeend', `
					<div id="block-${block.id}" class="card mb-4">
						<div class="card-body p-3">
							<h2 class="card-title">
								<button class="float-right btn btn-outline-secondary" onclick="window.scrollTo({ top: 0 })">
									<svg class="bi bi-chevron-double-up text-width" width="1em" height="1em" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
										<path fill-rule="evenodd" d="M7.646 2.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1-.708.708L8 3.707 2.354 9.354a.5.5 0 1 1-.708-.708l6-6z"/>
										<path fill-rule="evenodd" d="M7.646 6.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1-.708.708L8 7.707l-5.646 5.647a.5.5 0 0 1-.708-.708l6-6z"/>
									</svg>
								</button>
								<u>${block.name}</u>
							</h2>
							<ul id="ul-${block.id}" class="accordion list-group list-group-flush p-2">
							</ul>
						</div>
					</div>
				`);

				let container = document.getElementById('ul-' + block.id);
				if (block.entries) {
					block.entries.forEach(element => {
						container.insertAdjacentHTML('beforeend', `
							<li class="list-group-item d-flex justify-content-between align-items-center px-1">
								<h5 class="m-0 pr-3">
									${element.name}
									<small class="text-muted">${element.size ? element.size : ''}</small>
									<br>
									<small class="text-muted">${element.ingredients ? element.ingredients : ''}</small>
								</h5>
								<div>
									${element.hh ? '<span class="badge badge-success badge-pill">' + element.hh + '</span><br>' : ""}
									<span class="badge badge-secondary badge-pill">${element.price}</span>
								</div>
							</li>
						`);
					});
				}
				if (block.blocks) {
					block.blocks.forEach(subblock => {
						container.insertAdjacentHTML('beforeend', `
							<li id="label-${subblock.id}" class="list-group-item d-flex px-1" style="border: none">
								<button class="btn btn-outline-dark btn-block" type="button" data-toggle="collapse" data-target="collapse-${subblock.id}" onclick="$('#collapse-${subblock.id}').toggleClass('d-none')">
									${subblock.name}
								</button>
							</li>
							<div id="collapse-${subblock.id}" class="list-group-flush d-none" aria-labelledby="label-${subblock.id}"></div>
						`);
						let block_container = document.getElementById('collapse-' + subblock.id);
						subblock.entries.forEach(element => {
							block_container.insertAdjacentHTML('beforeend', `
								<li class="list-group-item d-flex justify-content-between align-items-center px-1">
									<h5 class="m-0 pr-3">
										${element.name}
										<small class="text-muted">${element.size ? element.size : ''}</small>
										<br>
										<small class="text-muted">${element.ingredients ? element.ingredients : ''}</small>
									</h5>
									<div>
										${element.hh ? '<span class="badge badge-success badge-pill">' + element.hh + '</span><br>' : ""}
										<span class="badge badge-secondary badge-pill">${element.price}</span>
									</div>
								</li>
							`);
						});
					})
				}
			}

			$('#welcomemodal').modal('show');

			async function run() {
				let data = await fetch("./data.json");
				let blocks = await data.json();
				blocks.forEach(block => {
					create_block(block);
				});
			}
			run();
		</script>
	</body>
</html>
