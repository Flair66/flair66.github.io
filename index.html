<!doctype html>
<html lang="de">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

		<title>Speisekarte - Flair66</title>

		<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
	</head>
	<body>
		<main class="container-md">
			<div class="mt-5 mb-4 text-center">
				<img height="60px" src="./flair.png">
			</div>
			<div class="alert alert-success" role="alert">
				<strong>Happy Hour</strong>
				Dienstags, Mittwochs & Donnerstags von 19-22 Uhr gelten die gr√ºnen Happy Hour Preise.
			</div>
			<div class="card mb-4">
				<div class="card-body p-3">
					<h2 class="card-title">
						<u>Inhalt</u>
					</h2>
					<div id="content" class="row px-3"></div>
				</div>
			</div>
		</main>

		<script>
			function create_block(block) {
				document.getElementById('content').insertAdjacentHTML('beforeend', `
					<div class="col-sm-6 col-md-4 col-lg-3 col-xl-2 p-1">
						<button class="btn btn-outline-dark btn-block" onclick="document.getElementById('block-${block.id}').scrollIntoView(true)">${block.name}</button>
					</div>
				`);
				document.getElementsByTagName('main')[0].insertAdjacentHTML('beforeend', `
					<div id="block-${block.id}" class="card mb-4">
						<div class="card-body p-3">
							<h2 class="card-title">
								<button class="float-right btn btn-outline-secondary" onclick="window.scrollTo({ top: 0 })">
									<svg class="bi bi-chevron-double-up text-width" width="1em" height="1em" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
										<path fill-rule="evenodd" d="M7.646 2.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1-.708.708L8 3.707 2.354 9.354a.5.5 0 1 1-.708-.708l6-6z"/>
										<path fill-rule="evenodd" d="M7.646 6.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1-.708.708L8 7.707l-5.646 5.647a.5.5 0 0 1-.708-.708l6-6z"/>
									</svg>
								</button>
								<u>${block.name}</u>
							</h2>
							<ul id="ul-${block.id}" class="list-group list-group-flush p-2">
							</ul>
						</div>
					</div>
				`);

				let container = document.getElementById('ul-' + block.id);
				block.entries.forEach(element => {
					let hhprice = element.hh ? '<span class="badge badge-success badge-pill">' + element.hh + '</span><br>' : "";
					container.insertAdjacentHTML('beforeend', `
						<li class="list-group-item d-flex justify-content-between align-items-center px-1">
							<h5 class="m-0 pr-3">
								${element.name}<br>
								<small class="text-muted">${element.ingredients}</small>
							</h5>
							<div>
								${hhprice}
								<span class="badge badge-secondary badge-pill">${element.price}</span>
							</div>
						</li>
					`);
				});
			}

			async function run() {
				let data = await fetch("./data.json");
				let blocks = await data.json();
				blocks.forEach(block => {
					create_block(block);
				});
			}
			run();
		</script>
	</body>
</html>
