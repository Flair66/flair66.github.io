<!doctype html>
<html lang="de">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

		<title>Speisekarte - Flair66</title>

		<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
	</head>
	<body class="bg-light">
		<main class="container-md">
			<div class="mt-5 mb-4 text-center">
				<img height="60px" src="./flair.svg">
			</div>
			<div class="alert alert-success text-center" role="alert">
				<strong>Happy Hour</strong><br>
				Sonntag bis Donnerstag von 17-20 Uhr gelten die grünen Happy Hour Preise.
			</div>
			<div class="card mb-4">
				<div class="card-body p-3">
					<div id="content" class="row px-3"></div>
				</div>
			</div>
		</main>

		<footer>
			<p class="pt-2 pb-3 text-center">
				<a href="./impressum.html">
					Impressum & Datenschutzerklärung
				</a>
				<br>
				<a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.de">
					CC BY-NC-SA 4.0
				</a>
			</p>
		</footer>

		<div class="modal fade" id="welcomemodal" data-backdrop="static" data-keyboard="true" data-focus="true" data-show="true" tabindex="-1" role="dialog" aria-labelledby="welcomelabel" aria-hidden="true">
			<div class="modal-dialog modal-lg modal-dialog-centered modal-dialog-scrollable">
				<div class="modal-content">
					<div class="modal-header">
						<h3 class="modal-title" id="welcomelabel">Herzlich Willkommen!</h3>
					</div>
					<div class="modal-body">
						Liebe Gäste, Willkommen auf der digitalen Getränke- und Speisekarte des Flair66.
						Auf Grund der aktuellen Hygienemaßnahmen haben wir nun eine digitale Karte damit Sie weiterhin sorgenfrei nach ihrem neuen Lieblings-Cocktail oder einen leckeren Snack stöbern können.
						<hr>
						Ab dem 1. Juli tritt die neue Corona-Verordnung in Kraft.
						Das bedeutet für Sie, dass Sie wieder wie gewohnt ihre privaten Veranstaltungen bei uns feiern können. Genauere Informationen finden Sie in der
						<a href="https://www.baden-wuerttemberg.de/de/service/aktuelle-infos-zu-corona/corona-verordnung-ab-1-juli-2020/">
							neuen Corona-Verordnung des Landes Baden-Württemberg,
						</a>
						außerdem finden Sie dort
						<a href="https://www.baden-wuerttemberg.de/de/service/aktuelle-infos-zu-corona/faq-corona-verordnung/#c111641">
							die wichtigsten Fragen und Antworten zum Thema private Veranstaltungen.
						</a>
						<hr>
						<h4>Unsere Öffnungszeiten:</h4>
						<dl class="row mx-0">
							<dt class="col-5 text-right">
								<strong>Montag:</strong>
							</dt>
							<dd class="col-7">
								17:00 Uhr - 00:00 Uhr
							</dd>
							<dt class="col-5 text-right">
								<strong>Dienstag:</strong>
							</dt>
							<dd class="col-7">
								17:00 Uhr - 00:00 Uhr
							</dd>
							<dt class="col-5 text-right">
								<strong>Mittwoch:</strong>
							</dt>
							<dd class="col-7">
								17:00 Uhr - 00:00 Uhr
							</dd>
							<dt class="col-5 text-right">
								<strong>Donnerstag:</strong>
							</dt>
							<dd class="col-7">
								17:00 Uhr - 00:00 Uhr
							</dd>
							<dt class="col-5 text-right">
								<strong>Freitag:</strong>
							</dt>
							<dd class="col-7">
								17:00 Uhr - 02:00 Uhr
							</dd>
							<dt class="col-5 text-right">
								<strong>Samstag:</strong>
							</dt>
							<dd class="col-7">
								17:00 Uhr - 02:00 Uhr
							</dd>
							<dt class="col-5 text-right">
								<strong>Sonntag:</strong>
							</dt>
							<dd class="col-7">
								17:00 Uhr - 00:00 Uhr
							</dd>
						</dl>
					</div>
					<div class="modal-footer justify-content-between">
						<a class="btn btn-outline-info text-info" href="https://www.baden-wuerttemberg.de/de/service/aktuelle-infos-zu-corona/verordnung-gastronomie/" target="_blank">
							Aktuelle Corona-Verordnung
						</a>
						<button type="button" class="btn btn-success" data-dismiss="modal">
							Zur Karte
							<svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-chevron-double-right" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
								<path fill-rule="evenodd" d="M3.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L9.293 8 3.646 2.354a.5.5 0 0 1 0-.708z"/>
								<path fill-rule="evenodd" d="M7.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L13.293 8 7.646 2.354a.5.5 0 0 1 0-.708z"/>
							</svg>
						</button>
					</div>
				</div>
			</div>
		</div>

		<div class="modal fade" id="detailmodal" data-keyboard="true" data-focus="true" tabindex="-1" role="dialog" aria-labelledby="detaillabel" aria-hidden="true">
			<div class="modal-dialog modal-lg modal-dialog-centered modal-dialog-scrollable">
				<div class="modal-content">
					<div class="modal-header">
						<h3 class="modal-title" id="detaillabel"></h3>
					</div>
					<div id="detailbody" class="modal-body"></div>
					<div class="modal-footer">
						<button class="btn btn-outline-secondary" data-dismiss="modal">
							<svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-chevron-double-left" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
								<path fill-rule="evenodd" d="M8.354 1.646a.5.5 0 0 1 0 .708L2.707 8l5.647 5.646a.5.5 0 0 1-.708.708l-6-6a.5.5 0 0 1 0-.708l6-6a.5.5 0 0 1 .708 0z"/>
								<path fill-rule="evenodd" d="M12.354 1.646a.5.5 0 0 1 0 .708L6.707 8l5.647 5.646a.5.5 0 0 1-.708.708l-6-6a.5.5 0 0 1 0-.708l6-6a.5.5 0 0 1 .708 0z"/>
							</svg>
							Zurück
						</button>
					</div>
				</div>
			</div>
		</div>

		<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
		<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
		<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js" integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI" crossorigin="anonymous"></script>
		<script>
			var detail_modal_data = [];

			function create_entrys(entries, container) {
				entries.forEach(element => {
					if (element.sizes) {
						function helper(id) {
							if (element.sizes[id]) {
								return `
									<li class="list-group-item border-0 d-flex justify-content-between align-items-center p-1">
										<div>
											${element.sizes[id].glass ? '<img src="glassware/' + element.sizes[id].glass + '.svg" height="20px" class="mr-2 float-left"/>' : ''}
											${element.sizes[id].size}
										</div>
										<span class="badge badge-secondary badge-pill">
											${element.sizes[id].price}
										</span>
									</li>
								`;
							} else return '';
						}

						container.insertAdjacentHTML('beforeend', `
							<li class="list-group-item px-1 position-relative" style="padding-left: 31px !important">
								${element.glass ? '<img src="glassware/' + element.glass + '.svg" height="30px" class="mr-2 float-left position-absolute" style="top: 50%;margin-left: -31px;transform: translateY(-50%)"/>' : ''}
								<h5 class="m-0 pr-3">
									${element.name}
									<small class="text-muted">${element.ingredients ? element.ingredients : ''}</small>
								</h5>
								<ul class="list-group">
									${helper(0)}
									${helper(1)}
									${helper(2)}
									${helper(3)}
								</ul>
							</li>
						`);
					} else {
						let detail_id = 0;
						if (element.detail) {
							detail_id = detail_modal_data.length;
							detail_modal_data.push(element.detail);
						}

						container.insertAdjacentHTML('beforeend', `
							<li class="list-group-item d-flex justify-content-between align-items-center px-1 ${element.detail ? 'text-info' : ''}" ${element.detail ? 'onclick="run_detail_modal(' + detail_id + ')' : ''}">
								<div class="d-flex">
									${element.glass ? '<img src="glassware/' + element.glass + '.svg" height="30px" class="mr-2"/>' : ''}
									<h5 class="m-0 pr-3">
										${element.name}
										<small class="text-muted">${element.size ? element.size : ''}</small>
										<br>
										<small class="text-muted">${element.ingredients ? element.ingredients : ''}</small>
									</h5>
								</div>
								<div>
									${element.hh ? '<span class="badge badge-success badge-pill">' + element.hh + '</span><br>' : ""}
									<span class="badge badge-secondary badge-pill">${element.price}</span>
								</div>
							</li>
						`);
					}
				});
			}

			function create_block(block) {
				document.getElementById('content').insertAdjacentHTML('beforeend', `
					<div class="col-sm-6 col-md-4 col-lg-3 p-1">
						<button class="btn btn-outline-dark btn-block" onclick="document.getElementById('block-${block.id}').scrollIntoView(true)">${block.name}</button>
					</div>
				`);
				document.getElementsByTagName('main')[0].insertAdjacentHTML('beforeend', `
					<div id="block-${block.id}" class="card mb-4">
						<div class="card-body p-3">
							<h2 class="card-title">
								<button class="float-right btn btn-outline-secondary" onclick="window.scrollTo({ top: 0 })">
									<svg class="bi bi-chevron-double-up text-width" width="1em" height="1em" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
										<path fill-rule="evenodd" d="M7.646 2.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1-.708.708L8 3.707 2.354 9.354a.5.5 0 1 1-.708-.708l6-6z"/>
										<path fill-rule="evenodd" d="M7.646 6.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1-.708.708L8 7.707l-5.646 5.647a.5.5 0 0 1-.708-.708l6-6z"/>
									</svg>
								</button>
								<u>${block.name}</u>
							</h2>
							<ul id="ul-${block.id}" class="accordion list-group list-group-flush p-2">
							</ul>
						</div>
					</div>
				`);

				let container = document.getElementById('ul-' + block.id);
				if (block.entries) {
					create_entrys(block.entries, container);
				}
				if (block.blocks) {
					block.blocks.forEach(subblock => {
						container.insertAdjacentHTML('beforeend', `
							<li id="label-${subblock.id}" class="list-group-item d-flex px-1" style="border: none">
								<button class="btn btn-outline-dark btn-block" type="button" data-toggle="collapse" data-target="collapse-${subblock.id}" onclick="$('#collapse-${subblock.id}').toggleClass('d-none')">
									${subblock.name}
								</button>
							</li>
							<div id="collapse-${subblock.id}" class="list-group-flush d-none" aria-labelledby="label-${subblock.id}"></div>
						`);
						create_entrys(subblock.entries, document.getElementById('collapse-' + subblock.id));
					})
				}
			}

			function run_detail_modal(id) {
				document.getElementById('detaillabel').innerText = detail_modal_data[id].title;

				let container = document.getElementById('detailbody');
				container.innerHTML = '';
				detail_modal_data[id].blocks.forEach(block => {
					if (block.type === 'text') {
						container.insertAdjacentHTML('beforeend', `
							<p class="mb-3">${block.content}</p>
						`);
					} else if (block.type === 'image') {
						container.insertAdjacentHTML('beforeend', `
							<img class="mb-3" width="100%" src="./data/${block.content}">
						`);
					}
				});

				$('#detailmodal').modal('show');
			}

			$('#welcomemodal').modal('show');
			async function run() {
				let data = await fetch("./data.json");
				let blocks = await data.json();
				blocks.forEach(block => {
					create_block(block);
				});
			}
			run();
		</script>
	</body>
</html>
